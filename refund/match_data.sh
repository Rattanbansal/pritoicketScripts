#!/bin/bash

# Define your order IDs here as a space-separated list
order_ids="172833299985441 172833315563355 172833424899773 172833793310646 172837657005066 172837921447489 172838784074556 172839339661256 172839757165890 172839801485502 172839999428072 172840403128927 172840869345875 172840926134366 172840964101357 172841006477563 172841281137681 172841582049487 172846202691111 172846332735504 172846396713935 172847246096002 172847298734999 172847690706067 172847714960307 172848238946120 172848469481232 172848644668811 172848644801815 172849083419685 172849375067528 172849512095316 172849578270402 172849760875637 172849848747362 172850059612609 172850130628048 172850294309286 172850308798204 172850431458146 172850480335216 172850518461458 172850604083728 172855055153282 172855546255870 172856398153006 172857529867370 172857671450381 172858775179517 172859811498317 172859837207288 172863836094512 172863962886539 172864664268007 172864876341442 172865064865619 172866279205119 172867101590693 172867333489762 172867755025377 172867957923462 172868137214320 172868158498059 172868165202494 172868337115802 172868364854733 172871533571031 172871775886041 172871803586999 172873097329531 172873249964332 172873339412492 172873483729818 172873730913334 172874050443094 172874283938192 172874430744133 172874580637426 172874944455812 172875272213739 172875287804749 172875305319915 172875453262993 172876452815841 172876511479541 172880123227954 172880742335949 172880925218348 172880968790598 172881004679203 172881266936502 172881333468039 172881954196876 172882345884760 172882454895054 172882777323574 172882838412601 172882987605227 172883149211575 172883198198864 172883273581375 172883361226363 172883375507584 172883659219468 172883738022048 172883828414936 172883860799056 172883921432709 172884045951795 172884121211591 172884121608648 172884904476432 172885017214863 172885032435494 172885210981174 172885307845451 172885399569045 172888905317055 172889310443435 172889957667560 172890036410900 172890514838516 172892105755340 172892117647356 172892427704417 172892823141927 172892942759021 172893129601137 172893196838791 172893329456502 172893752077000 172893781521917 172893804055077 172894074203977 172897611320441 172898291097379 172898835390127 172899134931468 172900096613584 172900343264348 172901082528063 172901432225638 172901597760497 172901714276992 172901870173476 172901903327006 172902789108675 172905310994101 172906413472214 172906517348892 172906611253659 172907135254311 172907154829754 172907337127403 172907872182385 172908464754332 172908543935779 172910516278790 172910665055032 172911010070565 172911167209092 172911174218853 172911391298929 172914313516269 172916405898807 172916469567231 172916475901799 172917276027230 172918970694017 172919140211365 172919379281626 172919527682618 172919661777377 172919841626070 172919889588296 172920391897432 172923817219684 172924210511110 172924842941728 172925578687580 172926697205134 172926920202398 172927637693786 172927678894206 172928020557765 172932045566032 172933596275687 172933834128202 172935278424970 172937193585075 172941399299001 172941682252962 172941763751982 172942442072038 172942878686540 172943033312028 172943149365913 172943180892263 172943493122849 172943537271169 172944338476107 172944343385715 172944375630073 172944428971646 172944453902643 172945082043083 172945112996390 172945281532410 172945456886785 172945457031550 172945461877220 172945564251967 172945743604848 172945847423746 172949304436495 172949361413340 172953258304810 172953259706562 172953388908321 172953467202758 172953553789308 172953606351074 172953900273013 172955360482063 172958780944390 172959021285994 172959063568576 172959894187002 172961808625924 172962060863093 172962580088698 172962947143043 172966792331623 172966950396097 172966970136993 172968072700823 172968093921559 172969892332642 172970973186994 172971664294774 172971707222689 172975696087383 172976123794153 172976414535266 172976677604563 172976915309803 172976959459406 172979834148990 172980126937122 172983413914527 172984490892282 172985993142791 172986566884711 172986601477842 172986648399116 172986759070613 172986985645596 172987122024870 172987219994615 172987841640768 172987948432988 172988487059471 172988507513838 172988716556539 172988752408528 172988852228247 172989059548168 172993077413572 172994008740821 172995451441300 172996136773048 172997223858746 172998121468115 172998190565107 173001652381285 173002089897051 173002540137627 173002711013653 173003558942432 173003800641093 173003818948215 173004108453824 173004113994644 173004307421388 173004679000565 173005195058119 173005210690692 173005251673861 173005364592798 173005649583631 173005651481766 173005760911323 173005814905362 173006123448661 173006892549491 173010006656583 173011031626563 173011070246888 173011425065224 173011449368067 173012122452394 173012399420798 173012490346011 173012757905386 173012870523316 173012975678606 173013328029286 173014578199667 173014686084626 173014726775669 173014965539451 173015166799461 173015549838965 173019655119744 173020545777409 173020701763149 173020735242752 173020893363542 173021000274207 173021419518552 173021679221654 173021765074719 173021782391020 173022693474585 173022928998509 173023048701189 173027220159960 173028135285992 173028296557941 173028961605107 173029402068840 173029549166822 173030130798039 173030320893426 173030563037329 173030604763878 173030743860553 173031711316321 173031967194113 173037245365721 173037508843938 173037695236103 173039414612721 173039959300185 173040062914776 173040115917341 173040310664869 173040405907100 173040453805877 173040502901062 173040838391369 173041128391274 173041415221630 173044862410371 173045147410073 173045191111070 173046665746288 173046798572279 173046907629322 173047299728653 173048680494059 173048689459435 173048747791588 173048794572210 173048969148691 173049246810810 173049312844547 173049481845510 173050484365355 173050563593026 173053730966897 173054255584526 173054402312234 173054458687276 173054595835236 173054949597328 173054963641572 173054984316958 173055016076242 173055214794637 173055218817930 173055410488966 173055414671682 173055457072018 173056200955975 173056309157487 173056364053803 173056751344101 173057059234405 173057110211313 173057765827119 173057903637834 173058203374393 173058272044798 173062165393245 173062181864013 173062592584241 173062641085199 173063048253073 173063265538239 173063580245829 173063963877766 173063992160983 173064808913378 173064830285778 173064906185742 173064984044563 173065219187065 173065231129722 173065256852749 173065366946834 173065557052534 173065847557505 173066166493942 173066219841209 173066298112532 173066479905791 173066505680073 173066718568010 173066776434666 173066996524621 173067022820408 173067345873515 173068851111255 173069589408432 173070695196361 173070974551687 173072383782010 173072490630431 173072737369576 173073969512707 173074286833872 173074346078140 173074377310364 173074393301747 173074410954627 173074589521020 173074814451768 173074873717728 173075041702040 173075185668108 173075243554362 173075352840493 173075790814523 173075910027056 173079703756800 173080095766510 173080125079893 173080137911288 173080212131612 173081150680727 173081799161521 173081818295453 173081861136665 173082050897890 173082392291045 173083328430910 173083522228778 173083536510523 173083575174029 173083810535254 173083970148610 173083999894136 173084060862967 173084204153373 173084403111327 173084779812885 173084882071166 173088625942020 173088966739646 173089208708241 173089877047978 173089903876337 173090073943712 173090116246904 173090154596238 173090566684081 173090604560795 173091122093670 173091513588285 173092059626756 173092087157179 173092104215900 173092417961248 173092455210106 173092482689811 173092483311075 173092603548929 173092627602305 173092685525206 173092709558543 173092771249019 173092847100593 173093038824015 173093188896154 173093309888598 173096113461197 173097218708913 173097603306273 173097884411559 173098803773157 173099041767852 173100384177626 173100496153155 173100523487944 173100574308403 173100620457994 173100987780009 173101006254919 173101163936427 173101166016552 173101248715804 173103500524505 173104690305819 173105445561241 173105518018394 173105706594475 173106378550802 173106499326720 173107139041670 173107263270654 173107289065225 173107758219459 173108378901702 173108490712268 173108606426616 173108625415250 173108807654487 173108851244446 173109889855295 173109916217841 173110172353174 173110328030339 173110339735864 173110566279643 173110646525146 173110687487049 173113686911489 173113821914540 173113934931675 173114484997608 173114600261650 173115050213422 173115201354276 173115219412289 173115349152249 173115977919066 173116967420857 173117165894543 173117668505716 173118211472425 173118671301061 173118837525487 173118889465223 173119151669444 173122739294192 173122910188898 173123109753170 173123156376813 173123313828337 173124046820161 173124898336242 173124981966475 173125191276395 173125275621708 173125500265579 173125519229119 173125681286412 173125799422459 173125966330428 173126166507248 173126213334587 173126267626447 173126556751075 173126636188023 173126697540025 173126885863996 173127070441483 173127247776868 173127253956924 173127263221175 173127383092378 173127625413936 173131210168796 173131957900466 173134100320824 173135283473932 173135559123202 173135902004969 173136810873712 173137055562023 173139669261180 173140490168731 173141531055902 173141962017061 173142247467706 173143441788558 173143464909303 173143972778526 173144086037036 173144091598839 173144137274399 173144158714436 173144191186083 173144371363805 173144419555528 173144496072731 173144525536974 173144542962953 173144615807690 173144675422451 173145163818319 173148819080320 173148927118237 173149202239869 173149851228612 173149871989524 173151311916940 173152466164934 173152580313463 173153104129145 173153328257522 173153908946801 173154450534543 173157165186864 173157484146350 173157828725137 173158432147630 173159528488086 173161090929590 173161347989188 173161486906059 173161979580624 173162060074128 173162070342733 173162184025508 173162844518681 173166389968887 173166612707630 173166735674776 173166755300691 173167420112190 173167465371105 173167788154638 173167840380071 173168910364939 173169035847848 173169408807635 173169733784379 173170682543421 173170690621454 173170869164070 173171015810796 173174980426053 173175046313701 173175387629883 173175459644936 173175573154495 173175667010524 173175731864925 173175732030150 173175746052623 173175753440650 173175845617268 173175876336757 173175881206247 173175968627656 173176410181393 173176891122040 173176895273700 173177131680031 173178342413474 173178963581691 173178990627592 173179426499418 173179626203491 173183470015365 173183648563731 173183764273881 173184740875929 173184846733769 173185850967815 173186141645381 173186610366455 173186762646183 173186945192440 173187144783022 173187311434440 173187401068390 173187655902834 173187792197486 173187910720525 173188358559695 173192638001521 173193201907688 173193697571995 173194118384560 173194251483177 173195126475849 173195420736053 173195447889535 173195692877099 173196254361249 173196286229117 173196587580570 173196854464229 173197074460822 173197374884501 173200475231020 173200480145069 173200488976927 173200737905342 173200769367343 173201148954321 173201186607372 173201482504450 173201687819489 173201692968252 173201714611604 173201941686626 173202625356997 173202642897706 173202670329438 173202920621801 173203512378240 173203543317703 173204721269594 173204733425007 173205170219330 173205391338973 173205564942071 173209837174031 173210299996862 173210516708508 173212044327428 173212172007656 173212526109802 173212733090736 173213141782835 173213308876236 173213721161106 173213739842295 173213774661958 173214323696849 173217635440739 173217940892841 173219194895770 173220526301636 173220548245661 173221475109130 173221782253568 173221796347465 173222144653738 173222570964676 173222648482874 173222720009750 173228886138502 173229006220203 173229596857892 173229639365719 173229806580686 173229828579710 173230415737717 173230961081586 173231088064199 173231240705266 173235015259434 173235352140226 173235743650377 173235806507038 173235989945756 173236380640760 173236535773981 173236575175089 173236698423830 173236811947623 173236853854637 173236875300268 173237331367994 173238074066923 173239517604986 173240489424744 173244349528716 173244449049350 173245123993955 173245153591819 173245179260552 173245267628692 173245929259688 173246610719360 173246649518928 173247166087883 173247167970423 173247207140305 173247487242130 173248028756183 173248148744091 173252091047652 173255159629715 173255564942861 173256020502072 173256022895031 173256078290569 173256151351313 173256393187209 173256517779572 173256773111282 173256905232175 173256909555199 173257024838104 173263498227202 173264447981490 173265044006020 173265238336389 173265280302410 173265323903699 173265507505938 173265528292273 173266093606028 173270021037814 173272646242480 173272786838292 173272899140981 173273003759704 173273137828686 173273138097262 173273359650865 173273440997453 173273525205347 173273731254318 173273925034524 173274208943297 173274949066635 173277763127524 173277845771928 173277907369468 173278714670466 173278980963331 173279045654152 173279055729751 173279417174871 173281675093193 173282078162110 173282400759279 173282629858926 173282782348060 173282947249644 173284607326084 173286575358384 173286904648276 173287421171871 173289159758870 173289342479811 173289478155913 173289511117308 173289563237394 173289731651977 173290438602871 173290653507280 173291225829047 173292096445323 173292247243505 173295582946715 173295598820724 173295802416407 173296055079664 173297411322372 173297644039601 173297730673697 173297756780008 173297960744256 173298035981090 173298116764304 173298909801724 173303957940236 173304673144483 173305516798390 173306114656882 173306223212392 173306330448140 173306469656473 173306494197290 173308610849360 173308752356825 173309919727119 173314137738449 173315081164528 173317254242890 173321893752439 173321901293125 173321985592615 173321991040212 173322044964444 173322658265909 173322763045703 173323038651315 173323405731907 173323641262455 173325492077307 173326277243019 173326466001585 173326659199939 173330179104305 173330275150280 173330459516150 173330814110057 173330991502815 173331569970721 173332165247963 173332406902901 173332508840570 173332605535073 173332629157745 173332707946231 173332802964656 173333291391351 173333912523485 173333941398653 173333943694616 173334040240256 173334553183009 173334825040690 173340589438731 173340659404748 173340678470721 173340987058145 173341711018510 173341866887525 173342070680967 173342083397534 173342980006044 173343136040336 173343674639621 173347426874421 173347923365872 173348100469879 173348186473327 173348526110710 173348869815069 173349486484144 173349897129949 173350039863491 173350082877320 173350437619744 173350460923027 173351779194762 173352131377654 173355794242171 173356433405853 173356585788906 173357552173525 173358103780413 173358226896793"

# Write the header to the CSV file
# echo "order_id,currency,price_total" > "$output_file"

id_token_here="AMf-vBwj06kSVOoklpV-X6Oojn4XRkOhYe4c9PK8O75QoUvucpbWazzohWKJfRVfgNZWyGMe0VR2N-KOlNLTXizQeNHcVhFanHSPiqyhLHafw6jgpZDnfHfVMLMotkAUEQ32tzCRsXOVjZTBR7loDtc0UWt03ZqcgIoDWFMulIvsX-dOvT1j7wBcClX8wglQP2L18tpJ6G-NSU7ehyXJ9_dGePutQVpHyFausrXvb-VgLITu_mfyUSQGfUx7PK_B0CsUTsuhRXB-4CtvGPbqMrqx_QoSIKyaATXawcH1NQWyjQOCU8gpLWFGfxPgtA4r7j0KZMzfuaA8N9qxrtPQherPDoSZ9A6E_htwg5S-i2dKKhpqECcST2vn6xUNWSDqTjWwhDP6pGQZABsPGGxDK7I9WWioHlE_4GWf-8ggLVN__eHZx9PSbRE7ay05SU0ggKfr4VR7faZP"

vpn_connection_name_a="pfSense-UDP4-1194-rattan1-config"
vpn_connection_name_b="pfSense-UDP4-1194-rattan2-config"

check_vpn_connection() {
    if nmcli connection show --active | grep -q "$vpn_connection_name_b"; then
        echo "VPN ($vpn_connection_name_b) is active."
    elif nmcli connection show --active | grep -q "$vpn_connection_name_a"; then
        echo "VPN ($vpn_connection_name_a) is active. Disconnecting it."
        sudo nmcli connection down $vpn_connection_name_a
        echo "rattan22024" | sudo nmcli --ask connection up $vpn_connection_name_b
        if nmcli connection show --active | grep -q "$vpn_connection_name_b"; then
            echo "VPN ($vpn_connection_name_b) is now connected."
            return 0
        else
            echo "Failed to connect VPN ($vpn_connection_name_b). Exiting with Condition 2."
            exit 1
        fi
    else
        echo "VPN ($vpn_connection_name_b) is not active. Connecting to the VPN."
        echo "rattan22024" | sudo nmcli --ask connection up $vpn_connection_name_b
        echo "----------- Aboive Error Message-----------"
        if nmcli connection show --active | grep -q "$vpn_connection_name_b"; then
            echo "VPN ($vpn_connection_name_b) is now connected."
            return 0
        else
            echo "Failed to connect VPN ($vpn_connection_name_b). Exiting with condition 3."
            exit 1
        fi
    fi
}

# check_vpn_connection
# Loop through each order ID in the list
for order_id in $order_ids; do

    echo "http://localhost82.com/prioticket-refund/public/refundOrderFullQuantity/$order_id?refresh_token=$id_token_here&skip_third_party=0"
    
    response=$(curl -s "http://localhost82.com/prioticket-refund/public/refundOrderFullQuantity/$order_id?refresh_token=$id_token_here&skip_third_party=0")
    
    echo "$order_id" >> matchdata.txt
    echo "$response" >> response.json
    sleep 15
done

# jq -r '.response.data.order | "\(.order_reference): \(.order_status)"' response.json

# jq -r '.response.data.order | "\(.order_reference): \(.order_status)"' response.json response1.json response2.json response3.json > test.json
